# Глава 6. Документирование Java-кода

[Раздел 6.1. Создание документации с помощью Javadocs из командной строки](#раздел-61-создание-документации-с-помощью-javadocs-из-командной-строки)

[Раздел 6.2. Документирование классов](#раздел-62-документирование-классов)

[Раздел 6.3. Документирование методов](#раздел-63-документирование-методов)

[Раздел 6.4. Документирование пакета](#раздел-64-документирование-пакета)

[Раздел 6.5. Ссылки](#раздел-65-ссылки)

[Раздел 6.6. Фрагменты кода внутри документации](#раздел-66-фрагменты-кода-внутри-документации)

[Раздел 6.7. Документирование полей](#раздел-67-документирование-полей)

[Раздел 6.8. Документация по встроенному коду](#раздел-68-документация-по-встроенному-коду)

Документация к java-коду часто создаётся с помощью программы `javadoc`. Javadoc был создан компанией Sun Microsystems для генерации документации по API в формате HTML из исходного кода на языке Java. Использование формата HTML даёт возможность создавать гиперссылки на связанные документы. 

## Раздел 6.1. Создание документации с помощью Javadocs из командной строки

Многие IDE поддерживают автоматическую генерацию HTML из Javadoc; некоторые инструменты сборки (например, Maven и Gradle) также имеют плагины, которые могут управлять созданием HTML.

Однако для генерации Javadoc HTML эти инструменты не требуются; это можно сделать с помощью командной строки при помощи утилиты javadoc.

Наиболее просто вариант использования утилиты - это команда:

```bash
javadoc JavaFile.java
```

которая сгенерирует HTML из комментариев Javadoc, содержащихся в JavaFile.java.

Более практичным будет использование утилиты командной строки, которая рекурсивно прочитает все java-файлы в директории `[source-directory]`, создаст документацию для пакета `[package.name]` и всех подпакетов, а сгенерированный HTML поместит в каталог `[docs-directory]`:

```bash
javadoc -d [docs-direcotory] -subpackages -sourcepath [source-directory]
```

[к оглавлению Глава 6](#глава-6-документирование-java-кода)

## Раздел 6.2. Документирование классов

Все комментарии Javadoc начинаются с блока комментариев, заключенного между символами `/**` и `*/`, которые обозначают соответственно начало и конец блока. По желанию, каждая строка внутри блока может начинаться с произвольного символа пробела и одной звездочки; они игнорируются при генерации файлов документации.

```java
/**
 * Кратко описание класса, заканчивающегося точкой.
 * 
 * Между кратким описанием и дальнейшей информацией принято оставлять пустую строку.
 * Краткое описание (все, что расположено до первой точки) используется в классе или пакете
 * в качестве краткого обзора класса.
 * 
 * Могут использоваться следующие строчные теги (список не является исчерпывающим):
 * {@link some.other.class.Documentation} для ссылок на другие документы или символы
 * {@link some.other.class.Documentation Some Display Name} внешний вид ссылки может
 * настраиваться путем добавления отображаемого имени после doc или символа локатора
 * {@code code goes here} для форматирования в виде кода
 * {@literal <>[]()foo} отображения в виде обычного текста без преобразования
 * в HTML-разметку или применения другой маркировки
 * 
 * На усмотрения автора кода, в конце документации класса могут использоваться следующие
 * теги (список не является исчерпывающим):
 * 
 * @author John Doe - азадёт сведения об авторе
 * @version 1.0 - задаёт номер версии класса
 * @since 5/10/15 - определяет дату или версию, с которой класс присутствует
 * @see some.other.class.Documentation - что следует посмотреть дополнительно
 * @deprecated Этот класс был заменен на класс some.other.package.BetterFileReader
 * 
 * Для отображения дополнительной информации можно также использовать
 * пользовательские теги
 * Использование тега @custom.<NAME> и тега -tag custom.<NAME>:html: "context"
 * опция командной строки, можно создавать пользовательский тег.
 * 
 * Пример пользовательского тега и способа его применения:
 * @custom.updated 2.0
 * Javadoc-флаг: -tag custom.updated:a: "Обновлено в версии:"
 * Приведённый выше флаг отобразит значение @custom.updated в разделе "Обновлено
 * в версии:".
 */
public class FileReader {
}
```

Те же самые теги и формат комментариев, используемые для классов, могу быть также использованы и для перечислений (`Enums`), и для интерфейсов (`Interfaces`).

[к оглавлению Глава 6](#глава-6-документирование-java-кода)

## Раздел 6.3. Документирование методов

Все комментарии Javadoc начинаются с блока комментариев, заключенного между символами (/**) и (*/), которые обозначают соответственно начала и конец блока. По желанию, каждая строчка изнутри этого блока может начинаться с произвольного символа пробела и одной звездочки; они игнорируются при генерации файлов документации.

```java
import java.io.IOException;
import java.io.InputStream;

/**
 * Краткое изложение сути метода, заканчивающегося точкой.
 *
 * Дальнейшее описание метода и того, что он делает, включая как можно больше деталей.
 * Здесь могут использоваться строчные теги, такие как
 * {@code code here}, {@link some.other.Docs}, а также {@literal text here}.
 *
 * Если данный метод переопределяет метод суперкласса, то для копирования документации
 * может быть использован тег {@inheritDoc} из метода суперкласса.
 *
 * @param stream        Здесь необходимо описать настолько подробно, насколько
 *                      только это возможно. Документация параметра обычно форматируется,
 *                      как здесь, но это необязательно. Как и в случае с другими
 *                      документами, текс в начале описания до первой точки
 *                      интерпретируется как краткое резюме для описываемого возвращаемого
 *                      значения.
 *
 * @throws IOException  Опишите, когда и почему может возникнуть это исключение.
 *                      Документы по исключениям обычно выравниваются, как здесь, но это
 *                      опционально.
 *                      Как и в случае с другими документами, текст в начале
 *                      описания до первой точки используется как краткое резюме
 *                      для описываемого исключения.
 *                      Вместо @throws можно также использовать @exception
 *
 * @since 2.1.0
 * @see some.other.class.Documentation
 * @deprecated Опишите, почему данный метод является устаревшим. Также может быть
 *              указана замена устаревшему методу.
 */
public String[] read(InputStream stream) throws IOException {
    return null;
}
```

[к оглавлению Глава 6](#глава-6-документирование-java-кода)

## Раздел 6.4. Документирование пакета
_Версия>=Java SE5_

В Javadocs можно создавать документацию на уровне пакетов, используя файл `package-info.java`. Этот файл должен быть отформатирован так, как это представлено ниже. Символы пробелов и звездочки необязательны, обычно они присутствуют в каждой строке для форматирования.

```java
/**
 * Краткое описание пакета, заканчивающееся точкой.
 * 
 * Между кратким описанием и дальнейшей информацией принято оставлять пустую строку.
 * Краткое описание (всё, что расположено до первой точки) используется в классе
 * или пакете в качестве предварительного описания класса. После пустой строки следует
 * подобным образом описать функциональность пакета.
 * 
 * Здесь могут использоваться строчные теги, такие как {@code code here},
 *  {@link reference.to.other.Documentation}, а также {@literal text here}
 */
package com.example.foo;

// Остальная часть файла должна оставаться пустой.
```

В приведённом выше случае необходимо поместить этот файл `package-info.java` в папку Java-пакета com.example.foo.

[к оглавлению Глава 6](#глава-6-документирование-java-кода)

## Раздел 6.5. Ссылки

Создать ссылки на другие документы Javadoc можно с помощью тега `@link`:

```java
/**
 * Вы можете создать ссылку на документацию javadoc уже импортированного класса с помощью тега
 *  {@link ClassName}
 *  
 * Вы можете также использовать полное имя, если класс ещё не импортирован:
 * {@link some.other.ClassName}
 * 
 * Также вы можете создавать ссылки на любые члены (поля или методы) класса, например, так: 
 *      {@link ClassName#somrMethod()}
 *      {@link ClassName#someMethodWithParameters(int, String)}     
 *      {@link ClassName#someField}
 *      {@link #someMethodnThisClass()} - этот тег используется для ссылки на члены текущего класса
 *      
 * Вы можете добавить метку к связанной с классом документации, например, так:
 *  {@link ClassName#someMethod() link text}
 */
```
    You can link to the javadoc of an already imported class using ClassName
    You can also use th fully-qualified name, if the class is no already imported: some.other.ClassName
    You can link to members (fields or methods) of a class like so:
        ClassName.someMethod()
        ClassName.someMethodWithParameters(int, String)
        ClassName.someField
        someMethodInThisClass() - used to link to members in the current class
    You can also add label to a linked javadoc like so: link text

С помощью тега `@see` можно добавлять элементы в раздел _See also_. Как и в случае с `@param` или **`@return`**, место, где они появляются, не имеет значения. В спецификации говорится, что его следует писать после `@return`.

```java
/**
 * Этот метод имеет хорошее объяснение, но вы можете найти и другую информацию
 * в нижней части.
 * @see ClassName#someMethod()
 */
```

Если необходимо добавить **ссылки на внешние ресурсы**, можно просто использовать HTML-тег `<a>`. Его можно использовать в любом месте строки или внутри тегов `@link` и `@see`.

```java
/**
 * Интересно, как это работает? Возможно, вы захотите
 * проверить этот <a href="http://stackoverflow.com/">Stack Overflow</a>
 * 
 * @see <a href="http://stackoverflow.com/">Stack Overflow</a>
 */
```

[к оглавлению Глава 6](#глава-6-документирование-java-кода)

## Раздел 6.6. Фрагменты кода внутри документации

Каноническим способом написания кода внутри документации является конструкция `{@code }`. Если многострочный код обернут внутри `<pre></pre`.

```java
/**
 * Класс TestUtils
 * <p>
 * Это {@code inline("пример кода")}.     
 * <p>
 * При написании многострочного кода его следует обернуть в теги pre.
 * <pre>{@code}
 * Пример example1 = new FirstLineExample();
 * example1.butYouCanHaveMoreThanOneLine();
 * }</pre>
 * Спасибо за чтение.
 */
class TestUtils{ }
```

Иногда бывает необходимо поместить сложный код внутри комментария javadoc. Особую проблему представляет знак @. Использование старого тега `<code>` наряду с конструкцией `{@literal}` решает эту проблему:

```java
/**
 * Usage:
 * <pre><code>
 * class SomethingTest {
 * {@literal @} Rule
 * public SingleTestRule singleTestRule = new SingleTestRule("test");
 * 
 * {@literal @} Test
 * public void test1() {
 *      // будет выполнен только этот тест
 *      }
 *      
 * ...  
 * }
 * </code}</pre>
 */
class SingleTestRule implements TestRule{ }
```

[к оглавлению Глава 6](#глава-6-документирование-java-кода)

## Раздел 6.7. Документирование полей

Все комментарии Javadoc начинаются с блока комментариев, заключенного между символами `/**` и `*/`, которые обозначают соответственно начало и конец блока. По желанию, каждая строка внутри этого блока может начинаться с произвольного символа пробела и одной звездочки; они игнорируются при генерации файлов документации.

```java
/**
 * Поля также могут быть документированы.
 * 
 * Как и в других javadoc, здесь размещается краткое описание (все, что расположено
 * до первой точки) и обычно отделяется от остальной части документации пустой строкой
 * 
 * В документации к полям могут использоваться строчные теги, например:
 * {@code код }
 * {@literal текст }
 * {@link other.docs.Here}
 * 
 * В документации для полей также могут использоваться следующие теги:
 * 
 * @since 2.1.0
 * @see some.other.class.Documentation
 * @deprecated Опишите, почемуу это поле устало
 */
public static final String CONSTANT_STRING = "foo";
```

[к оглавлению Глава 6](#глава-6-документирование-java-кода)

## Раздел 6.8. Документация по встроенному коду

Помимо документации Javadoc код может быть задокументирован непосредственно в каждой строке программы.

Однострочные комментарии начинаются с символа `//` и могут располагаться после инструкции в той же строке, но не перед ней.

```java
public void method() {
    // однострочный комментарий
    someMethodCall();   // однострочный комментарий после инструкции
}
```

Многострочные комментарии располагаются между `/*` и `*/`. Они могут занимать несколько строк и даже располагаться между инструкциями.

```java
public void method(Object object) {
    
    /*
            много
            строчный
            комментарий
     */
    object/*inner-line-comment*/.method();
}
```

JavaDocs - это особая форма многостраничных комментариев, начинающихся с `/**`.

Поскольку слишком большое количество встроенных комментариев может снизить читабельность кода, и следует использовать редко, в случае если какой-то участок кода недостаточно понятен или предложенная реализация не вполне очевидна.

Дополнительным вариантом использования однострочных комментариев является применение тегов, представляющих собой короткие ключевые слова, определяемые соглашениями. Некоторые среды разработки признают определённые соглашения для таких однострочных комментариев. Распространёнными примерами являются
+ `//TODO`
+ `//FIxME`
Или ссылки на ошибки, например, для Jira
+ `//PRJ-1234`

[к оглавлению Глава 6](#глава-6-документирование-java-кода)

