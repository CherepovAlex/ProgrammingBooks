# Глава 8. Команда Java - 'java' и 'javaw'

## Раздел 8.1. Класс с точкой входа

Класс Java с точкой входа содержит метод `main` со следующей сигнатурой и модификаторами доступа:

```java
public static void main(String[] args) {}
```

**Примечание**: в силу особенностей работы с массивами это может быть и объявление (`String args[]`).

При запуске виртуальной машины команда `java` загружает указанные классы с точками входа и пытается найти в них метод `main`. В случае успеха аргументы из командной строки преобразуются в объекты `Java String` и собираются в массив. Если метод `main` вызывается подобным образом, то длина этого массива не должны быть равна нулю и этот массив не должен содержать пустых элементов `null`.

Правильно написанный метод класса с точкой входа должен отвечать следующим условиям:
+ Иметь имя `main` (с учетом регистра)
+ Иметь модификаторы доступа **public** и **static**.
+ Тип возвращаемого значение должен быть **void**.
+ Иметь хотя бы один аргумент - массив строк `String[]`. Аргумент должен обязательно присутствовать. Количество аргументов должно быть не больше одного.
+ С целью совместимости: не допускаются параметры других типов данных.
+ С точки зрения иерархии - это должен быть метод верхнего уровня (он не должен быть вложенным методом и не должен содержать вложенные методы). 

Принято объявлять класс с модификатором доступа **public**, но это требование не является обязательным. Начиная с Java 5, тип аргумента метода `main` может быть не массивом строк, а массивом элементов типа String varargs. Метода `main` может по желанию выбрасывать исключения, а его параметр может быть назван как угодно, но, как правило, ему присваивают имя `args`.

**Точка входа JavaFX**

Начиная с `Java 8` команда `java` может также непосредственно запускать приложение JavaFX. JavaFX документируется в теге JavaFX, но точка входа JavaFX должна отвечать следующим критериям:
+ Вести свои происхождение от класса `javafx.application.Application`.
+ Иметь модификатор доступа **public**, а не **abstract**.
+ Не должен иметь обобщенный тип данных (не является методом-дженериком) и не должен быть вложенным.
+ Иметь явный или неявный конструктор с модификатором доступа **public**, не поддерживающий передачу аргументов в командной строке.

## Раздел 8.2. Устранение ошибок при использовании команды 'java'

В этом примере рассмотрены типичные ошибки при использовании команды 'java'.

**"Command not found" (рус. "Команда не найдена)**

Если вы получите сообщение об ошибке типа:

```bash
java: command not found
```

при попытке запуска на выполнение команды `java`, это означает, что в путях команды поиска оболочки отсутствует команда `java`. Причина может заключаться в следующем:
+ у вас вообще не установлены `Java JRE` или `JDK`,
+ вы не обновили переменную окружения `PATH` (или обновили некорректно) в файле инициализации вашей оболочки,
+ или вы указали в путях неверный файл инициализации для текущей командной оболочки.

Правильную последовательность установки `Java` см. в разделе "Установка Java".

**Could not find or load main class ("Не удалось найти или загрузить основной класс")**

Это сообщение об ошибке выдаётся командой `java`, если ей не удалось найти/загрузить указанный вами класс, содержащий точку входа. В общем случае это может произойти по трем причинам:
+ Вы указали несуществующий класс с точкой входа.
+ Класс существует, но вы указали его некорректно.
+ Класс существует, и вы правильно его указали, но `Java` не может его найти из-за неправильно заданного параметра `Classpath`.

Ниже приводится процедура диагностики и решения этой проблемы:

1. Необходимо выяснить полное имя класс с точкой входа.
+ Если у вас есть исходный код класса, то полное имя состоит из имени пакета и простого имени класса. Если класс `Main` объявлен в пакете `"com.example.myapp"`, то его полное имя будет `"com.example.myapp.Main"`.
+ Если у вас есть скомпилированный файл класса, вы можете найти имя класса, запустив команду javap и задав имя этого файла в качестве параметра.
+ Если файл класса находится в каталоге, то из имен каталога и подкаталогов можно вывести полное имя класса.
+ Если файл класса находится в JAR- или ZIP-файла, то полное имя класса можно определить по пути к файлу внутри JAR- или ZIP-файла.

2. Посмотрите на сообщение об ошибке, выданное командой `java`. В конце сообщения должно быть указано полное имя класса, которое java пытается использовать.
+ Убедитесь, что оно полностью совпадает с полным именем класса, содержащего точку входа.
+ Оно не должно заканчиваться на `".java"` или `".class"`.
+ Оно не должно содержать символов "косая черта" или любых других символов, которые не являются допустимыми для определения идентификаторов в языке `Java`.
+ Регистр имени должен точно соответствовать полное имени класса.

3. Если вы задаете правильное имя класса, убедитесь, что этот класс действительно находится в параметре `Classpath`:
+ Определите путь, к которому привязано имя класса; см. раздел "Сопоставление имен классов с именами путей".
+ Определите верно содержимое параметра `Classpath`; см. этот пример: "Различные способы указания пути к классу в параметре Classpath".
+ Просмотрите каждый из JAR- и ZIP-файлов, пути к которым заданы в `Classpath`, на предмет наличия в них класса с требуемым именем.
+ Просмотрите каждый каталог на предмет того, соответствует ли имя файла в пути реальному имени файла, содержащемуся в этом каталоге.



[к оглавлению Глава 8](#глава-8-команда-java---java-и-javaw)

[Раздел 8.1. Класс с точкой входа](#раздел-81-класс-с-точкой-входа)

[Раздел 8.2. Устранение ошибок при использовании команды 'java](#раздел-82-устранение-ошибок-при-использовании-команды-java)